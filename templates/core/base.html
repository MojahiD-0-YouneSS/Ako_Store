{% load static %}
<!doctype html>
<html lang='en'>
    <head>
        <script id="gtag" type="text/javascript" async="" src="https://www.googletagmanager.com/gtag/js"></script>
        <meta charset="UTF-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
        <link href="{% static 'node_modules\bootstrap\dist\css\bootstrap.min.css' %}" rel="stylesheet">
        <link href="{% static 'CSS\base.css' %}" rel="stylesheet">
        <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
        <title> AKO | {% block title %}home{% endblock %}</title>
        <script src="{% static 'JS/client_base.js'%}"> </script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <style>
            #filter_card {
                display: none; /* Initially hidden */
                background-color: lightgray;
                padding: 10px;
                border: 1px solid #ccc;
                border-radius: 5px;
                position: absolute; /* Absolute positioning relative to #filter_container */
                z-index: 1000;
                width: 60%; /* 40% narrower */
                height: 470%; /* Allow height to adjust based on content */
                top: 50%; /* Position below the filter container */
                right: 10%; /* Align to the left edge of the filter container */
                transform: translateY(10px); /* Add some spacing below the filter container */
                overflow: auto;
            }
        </style>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var slideIndex = 0;
                const url = "{% url 'headline:adshow' %}"
                const url1 = "{% url 'headline:Topliner' %}"
                headline(url);
                ALL_wearheadline(url1);

                showSlides(slideIndex);
                socialIcons();
                setInterval(checkContainerVisibility1, 500);
                setInterval(checkContainerVisibility2, 500);
                tagscaller();
                tag_sliders();

                brands();
                slide_TOP(topCurrentIndex);
                slide_Down(downCurrentIndex);
                slide_Feet(feetCurrentIndex);

                filter_card();
                poster_shower();
                var product_id = '{{product.id}}'
                setTimeout(function() {
                    reviews(product_id);
                }, 400);
                var firstContainer = document.querySelector('.image-container');
                if (firstContainer) {
                    firstContainer.style.display = 'block';
                    var firstImage = firstContainer.querySelector('img');
                    if (firstImage) {
                        document.getElementById('mainImage').src = firstImage.src;
                    }
                }


                const minRange = document.querySelector('.range-min');
                const maxRange = document.querySelector('.range-max');
                const minInput = document.querySelector('.input-min');
                const maxInput = document.querySelector('.input-max');
                 updatePriceRange();

                minRange.addEventListener('input', updatePriceRange);
                maxRange.addEventListener('input', updatePriceRange);
                minInput.addEventListener('input', function () {
                minRange.value = this.value;
                updatePriceRange();
                });
                maxInput.addEventListener('input', function () {
                maxRange.value = this.value;
                updatePriceRange();
                });
            });
            function tagscaller() {
                var container = document.getElementById('row_product_display');
                var url = "{% url 'headline:tagheadline' %}";
    
                fetch(url)
                    .then(response => response.text())
                    .then(data => {
                        container.innerHTML = data;
                    })
                    .catch(error => {
                        console.error('Error fetching data:', error);
                    });
            }
            function poster_shower() {
                var container = document.getElementById('poster_display');
                var url = "{% url 'shop:poster' %}";
    
                fetch(url)
                    .then(response => response.text())
                    .then(data => {
                        container.innerHTML = data;
                    })
                    .catch(error => {
                        console.error('Error fetching data:', error);
                    });
            }
            function tag_sliders(){
                const sliders = document.querySelectorAll('.slider');
        
                sliders.forEach(slider => {
                    slider.addEventListener('wheel', (event) => {
                        event.preventDefault();
                        slider.scrollLeft += event.deltaY;
                    });
            });
            }
        
            function updatePriceRange() {
                const minRange = document.querySelector('.range-min');
                const maxRange = document.querySelector('.range-max');
                const minInput = document.querySelector('.input-min');
                const maxInput = document.querySelector('.input-max');
                const hiddenInput = document.querySelector('#price');
              
                const minVal = parseInt(minRange.value);
                const maxVal = parseInt(maxRange.value);
              
                // Ensure min and max values are in correct order
                if (minVal > maxVal) {
                  minRange.value = maxVal;
                  minInput.value = maxVal;
                } else {
                  minInput.value = minVal;
                }
                if (maxVal < minVal) {
                  maxRange.value = minVal;
                  maxInput.value = minVal;
                } else {
                  maxInput.value = maxVal;
                }
              
                // Update the hidden input with min-max format
                hiddenInput.value = `${minRange.value}-${maxRange.value}`;
              }

            function filter_card() {
                var filterContainer = document.getElementById("filter_container");
                var filterContainer1 = document.getElementById("filter_container1");
                var filterCart = document.getElementById("filter_card");
                var hideTimeout; // Variable to hold the timeout ID
            
                filterContainer.addEventListener("mouseenter", function() {
                    clearTimeout(hideTimeout); // Clear the timeout if it exists
                    filterCart.style.display = "block";
                });
            
                filterContainer.addEventListener("mouseleave", function() {
                    hideTimeout = setTimeout(function() {
                        filterCart.style.display = "none";
                    }, 800); // 2-second delay
                });
                filterContainer1.addEventListener("mouseenter", function() {
                    clearTimeout(hideTimeout); // Clear the timeout if it exists
                    filterCart.style.display = "block";
                });
            
                filterContainer1.addEventListener("mouseleave", function() {
                    hideTimeout = setTimeout(function() {
                        filterCart.style.display = "none";
                    }, 800); // 2-second delay
                });
            
                filterCart.addEventListener("mouseenter", function() {
                    clearTimeout(hideTimeout); // Clear the timeout if it exists
                    filterCart.style.display = "block";
                });
            
                filterCart.addEventListener("mouseleave", function() {
                    hideTimeout = setTimeout(function() {
                        filterCart.style.display = "none";
                    }, 800); // 2-second delay
                });
            }

            function showfilter(){
                var filter = document.getElementById("filter_icon");
                if (filter.style.display == "block"){
                    filter.style.display = "none";
                }else{
                    filter.style.display = "block";
                }
            }

            function reviews(product_id){
                const reviewUrlTemplate = "{% url 'review:review_list' product_id=0 %}";
                var container = document.getElementById('reviews');
                const url = reviewUrlTemplate.replace('0', product_id);
                console.log(url)
                fetch(url)
                .then(response => response.text())
                .then(data => {
                    container.innerHTML = data;
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
            }

            function brands(){
                const brandUrlTemplate = "{% url 'product:brandlister' %}";
                var container = document.getElementById('brands');
                console.log(brandUrlTemplate)
                fetch(brandUrlTemplate)
                .then(response => response.text())
                .then(data => {
                    container.innerHTML = data;
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
            }
        </script>
        {% block extrastyle %}
            
        {% endblock extrastyle %}
    </head>
    <body>
    <div class="container-fluid">
        <div class="row">
          <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
            <div class="col-lg col-sm ml-auto" id="buttons2">
                <ul class="navbar-nav ml-auto list-inline">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-1 me-4">
                                <button class="navbar-toggler" type="button" onclick="openPanel()">
                                    <span class="navbar-toggler-icon"></span>
                                </button>
                            </div>                
                            <div class="col-5 ms-2" id="img7">
                                    <a class="navbar-brand" href="/"><!--<img src="{% static '#' %}" alt="AKO~Shop" width="300px" height="50px"/>-->
                                        <span class="navbar-brand text-center " style="width=210px; height:52px;">
                                            <img id="LGO3" src="{% static 'img/LGO-mobile.png' %}" alt="AKO~Shop" style="display: block;" class="img-fluid rounded" width="200px" height="50px"/>
                                            <img id="LGO4" src="{% static 'img/LGO2-mobile.png' %}" alt="AKO~Shop" style="display: none;" class="img-fluid rounded"  width="200px" height="50px"/>
                                        </span>
                                    </a>
                            </div>
                        <div class="col-1">
                                <li id="filter_icon" class="nav-item" style="display:none;"><div id="filter_container1" class="mt-2">filter<i class="fa fa-filter" aria-hidden="true"></i></div></li>
                        </div>
                            
                        {% if request.user.is_authenticated %}
                        {% if request.user.username == 'ILiac_Ak0' %}
                            <li class="nav-item"><a href="{% url 'shop:shopInterface' %}" class="btn btn-warning mt-1"> <STRONG>SHOP</STRONG> <i class="fas fa-store"></i></a></li>
                        {% else %}
                            <div class="col-1">
                                <li class="nav-item list-inline-item"><a href="{% url 'cart:view_cart' %}" class="nav-link"><i class="fas fa-shopping-cart"></i></a></li>
                            </div>
                            <div class="col-1">
                                <li class="nav-item list-inline-item"><a href="{% url 'client:profile' request.user.id  %}" class="nav-link"><i class="fas fa-user-circle"></i></a></li>
                            </div>
                            <div class="col-1">
                                <li class="nav-item list-inline-item"><a href="{% url 'cart:view_wish_list' %}" class="nav-link"><i class="fas fa-heart"></i></a></li>
                            </div>
                        {% endif %}
                        {% else %}
                        <div class="col-4">
                            <li class="nav-item  list-inline-item"><a href="{% url 'cart:view_temp_cart' %}" class="nav-link"><i class="fas fa-shopping-cart"></i></a></li>
                                <li class="nav-item  list-inline-item"><a href="{% url 'core:login' %}" class="nav-link"><i class="fas fa-user-circle"></i></a></li>
                                <li class="nav-item list-inline-item"><a href="{% url 'cart:unknown_client_options' %}" class="nav-link"><i> check options! </i></a></li>
                                <li class="nav-item list-inline-item"><a  class="nav-link" href="#" onclick="openPanel(), showfilter()"><i class="fa fa-search" aria-hidden="true"></i></a></li>
                        </div>
                            <!--<div class="col-1">
                                {% url 'core:login' %}
                                <li class="nav-item"><button class="nav-link" onclick="openPanel() "><i class="fas fa-search"></i></button></li>
                            </div>-->
                                
                        {% endif %}
                        </div>
                    </div>
                </ul>
            </div>
            <div class="collapse navbar-collapse" id="panel">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-2 col-sm-12" id="pic1">
                            <a class="navbar-brand" href="/"><!--<img src="{% static '#' %}" alt="AKO~Shop" width="300px" height="50px"/>-->
                                <span class="navbar-brand text-center"  style="width=210px; height:52px">
                                    <img id="LGO1" src="{% static 'img/LGO-mobile.png' %}" alt="AKO~Shop" style="display: block;" class="img-fluid rounded" width="200px" height="50px"/>
                                    <img id="LGO2" src="{% static 'img/LGO2-mobile.png' %}" alt="AKO~Shop" style="display: none;" class="img-fluid rounded" width="200px" height="50px"/>
                                </span>
                            </a>
                        </div>
                    <div class="col-lg">
                        <form action="{% url 'search:saerch_by_query' %}"  class="form-inline my-2 my-lg-0 mr-auto bg-primary rounded p-2 m-2">
                            <div class="input-group">
                                <input class="form-control mr-sm-2 mt-1" type="search" name="query_name" value="{{ request.GET.query_name }}" placeholder="Search by name" aria-label="Search"  style="height:30px">
                                
                                <div class="input-group-append">
                                    <button class="btn btn-outline-success text-white  ms-1" style="border: 2px solid red; height:40px;" type="submit">Search</button>
                                </div>
                            </div>
                    
                    <!-- Filter Section -->
                    <div id="filter_card" class="bg-light rounded p-2 m-2" style="display:none;">
                    <h5>Filters</h5>
                    <h6>Custom Options</h6>
                    <div class="mb-2">
                        <label for="size" class="form-label">Size:</label>
                        <input type="text" id="size" name="size" class="form-control" placeholder="Enter size" style="height:30px">
                    </div>
                    <div class="mb-2">
                        <label for="color" class="form-label">Color:</label>
                        <input type="text" id="color" name="color" class="form-control" placeholder="Enter color" style="height:30px">
                    </div>
                    <div class="mb-2">
                        <label for="price" class="form-label">Price:</label>
                        <input type="hidden" id="price" name="price" class="form-control" placeholder="Enter price range" style="height:30px">
                        <div class="wrapper">
                            <div class="row">
                              <div class="col-6">
                                <span>Min</span>
                                <input type="number" class="input-min" value="2500">
                                <div class="range-input mt-3">
                                    <input id="range_min" type="range" class="range-min" min="0" max="10000" value="100" step="100">
                                </div>        
                              </div>
                              <div class="col-6">
                                <span>Max</span>
                                <input type="number" class="input-max" value="7500">
                                <div class="range-input mt-3">
                                    <input id="range_max" type="range" class="range-max" min="0" max="10000" value="750" step="100">
                                </div>        
                              </div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-2">
                        <label for="mark" class="form-label">Mark:</label>
                        <input type="text" id="mark" name="mark" class="form-control" placeholder="Enter mark" style="height:30px">
                    </div>
                    <div class="mb-2">
                        <label for="fabric" class="form-label">Fabric:</label>
                        <input type="text" id="fabric" name="fabric" class="form-control" placeholder="Enter fabric type" style="height:30px">
                    </div>
                    <!--<div class="mb-2">
                        <button class="btn btn-outline-primary" type="submit">Apply Filters</button>
                    </div>-->
                    </form>
                </div>
                </div>
                <div class="col-lg-2 col-sm-2 ml-auto" id="buttons1">
                        <ul class="navbar-nav ml-auto">
                        <li class="nav-item"><div id="filter_container" class="nav-link"><i class="fa fa-filter" aria-hidden="true"></i></div></li>
                        {% if request.user.is_authenticated %}
                        {% if request.user.username == 'ILiac_Ak0' %}
                        <li class="nav-item"><a href="{% url 'shop:shopInterface' %}" class="btn btn-warning mt-1"> <STRONG>SHOP</STRONG> <i class="fas fa-store"></i></a></li>
                        {% else %}
                        <li class="nav-item"><a href="{% url 'cart:view_cart' %}" class="nav-link"><i class="fas fa-shopping-cart"></i></a></li>
                        <li class="nav-item"><a href="{% url 'client:profile' request.user.id %}" class="nav-link"><i class="fas fa-user-circle"></i></a></li>
                        <li class="nav-item list-inline-item"><a href="{% url 'cart:view_wish_list' %}" class="nav-link"><i class="fas fa-heart"></i></a></li>
                        {% endif %}
                        {% else %}
                            <li class="nav-item"><a href="{% url 'cart:unknown_client_options' %}" class="nav-link"><i> check our options! </i></a></li>
                            <li class="nav-item"><a href="{% url 'cart:view_temp_cart' %}" class="nav-link"><i class="fas fa-shopping-cart"></i></a></li>
                            <li class="nav-item"><a href="{% url 'core:login' %}" class="nav-link"><i class="fas fa-user-circle"></i></a></li>
                        {% endif %}
                        </ul>
                    </div>
                </div>
                <!--<div class="row">

                    <div class="col-lg mt-2">
                        <div>
                            <ul class="list-inline">
                                <li class="list-inline-item m-1"><a href="#" class="btn btn-success">Option 13</a></li>
                            </ul>
                        </div>
                    </div>
                    </div>--> 
                </div>
            </div>
           </nav>
        </div>
        
        {% if request.path == '/' %}
        
        <div class="row">
          <div id="self_adds" class="col-12"></div>
        </div>
        {% endif %}
        <main>
            
            {% if request.path == '/' %}
            <div class="row">
                <div id="row_product_display"></div>                
            </div>
            <div class="row">
                <div id="lib-wear"> </div>           
            </div>
            {% endif %}
            <div class="row">
                
                {% block content %}
                {% endblock %}
                
            </div>
            {% if request.path == '/' %}
            <div class="row">
                <div id='poster_display'></div>                
            </div>
            <div class="row">
                <div id='brands'></div>                
            </div>
            {% endif %}
        </main>
        <div class="button_container" id="button_container">
            <div class="center" id="center">
                <div class="social-icons" style="background-color: transparent;">
                  <a href="#" class="icon facebook" id="facebook" title="facebook"><i class="fab fa-facebook-f"></i></a>
                  <a href="#" class="icon twitter" id="twitter" title="twitter"><i class="fab fa-tiktok"></i></a>
                  <a href="#" class="icon instagram" id="instagram" title="instagram"><i class="fab fa-instagram"></i></a>
                  <a href="#" class="icon linkedin" id="linkedin" title="linkedin"><i class="fab fa-whatsapp"></i></a>
                </div>
                <div class="button" id="mainButton">
                    <div class="icon contact"><i class="fas fa-envelope"></i></div>
                </div>
            </div>
              
        </div>
          <div class="row">
            <div class="col-12">
                <footer class="bg-dark py-4 px-4">
                    <div class="row">
                        <div class="col-md-8 pr-5">
                            <h3 class="mb-3 font-weight-bold text-light">About</h3>
                            <p class="text-light">Lorem ipsum bla bla bla. Lorem ipsum bla bla bla. Lorem ipsum bla bla bla.</p>
                        </div>
                        <div class="col-md-4">
                            <h3 class="mb-3 font-weight-bold text-light">Menu</h3>
                            <ul class="list-unstyled">
                                <li><a href="#" class="text-light">About</a></li>
                                <li><a href="{% url 'core:contact' %}" class="text-light">Contact</a></li>
                                <li><a href="#" class="text-light">Privacy policy</a></li>
                                <li><a href="#" class="text-light">Terms of use</a></li>
                            </ul>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="{% static 'node_modules\@popperjs\core\dist\umd\popper-base.min.js' %}"></script>
        <script src="{% static 'node_modules/bootstrap/dist/js/bootstrap.bundle.min.js' %}"></script>
        <script>
            $(document).ready(function() {
                // Add change event listener to checkboxes
                $('.dropdown-item input[type="checkbox"]').change(function() {
                // Get the text of the checkbox label
                var labelText = $(this).siblings('label').text();
                if ($(this).prop('checked')) {
                // Perform action when checkbox is checked
                console.log('Checkbox with label ' + labelText + ' is checked');
                } else {
                // Perform action when checkbox is unchecked
                console.log('Checkbox with label ' + labelText + ' is unchecked');
                }
                });
                });
        </script>
    </div>
    </body>
</html>